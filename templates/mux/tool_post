#!/usr/bin/env bash
set -euo pipefail

# Mux tool_post hook
# Keep bead metadata in sync after file edits.

if [ "${MUX_TOOL:-}" = "file_edit_replace_string" ] || [ "${MUX_TOOL:-}" = "file_edit_insert" ]; then
  if command -v bd >/dev/null 2>&1; then
    bd sync >/dev/null 2>&1 || true
  elif [ -x "$HOME/bin/bd" ]; then
    "$HOME/bin/bd" sync >/dev/null 2>&1 || true
  fi
fi
